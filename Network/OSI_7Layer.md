# OSI 7계층

네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것이다.

<br>

### OSI 7 계층을 나눈 이유
계층을 나눈 이유는 통신이 일어나는 과정을 단계 별로 파악할 수 있기 때문이다.

흐름을 한눈에 알아보기 쉽고, 사람들이 이해하기 편하며, 7단계 중 특정한 곳에 이상이 생기면 다른 단계의 장비 및 소프트웨어를 건드리지 않고도 이상이 생긴 단계만 고칠 수 있다.

>PC방에서 배그를 하는데 연결이 끊겼다.  
<br>
원인 파악  
모든 PC가 문제가 있다면,  
라우터의 문제(3계층 네트워크 계층)이거나 광랜을 제공하는 회사의 회선 문제(1계층 물리 계층)  
한 PC만 문제가 있고  
배그 소프트웨어에 문제가 있다면(7계층 어플리케이션 계층)  
배그 소프트웨어는 문제가 없고, 스위치에 문제가 있으면(2계층 데이터링크 계층)  
<br>
원인을 파악해 다른 계층에 있는 장비나 소프트웨어를 건드리지 않는 것이다.

<br>

### OSI 7 계층 단계

![](https://velog.velcdn.com/images/jimeaning/post/55e3c4ac-81a1-41ce-b0d7-187df26bacdf/image.png)

<br>

**7계층 - 응용 계층(Physical Layer)**
- 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.
- 일반적인 응용 서비스는 관련된 응용 프로세스들 사이의 전환을 제공한다.
- 응용 서비스의 예: 가상터미널(텔넷), "Job transfer and Manipulation protocol" (JTM, 표준 ISO/IEC 8832) 등
- 최종 목적지로서 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있다.
- 통신 패킷들은 위 프로토콜에 의해 모두 처리되고, 우리가 사용하는 브라우저나 메일 프로그램은 프로토콜을 보다 쉽게 사용하게 해주는 응용 프로그램이다.
- 즉 모든 통신의 양끝단은 HTTP와 같은 프로토콜이지 응용프로그램이 아니다.
  
**네트워크 소프트웨어 UI 부분, 사용자의 입출력(I/O) 부분**

<br>

**6계층 - 표현 계층(Presentation Layer)**
- 데이터 표현이 상이한 응용 프로세스의 독립성을 제공하고 암호화한다.
- 표현 계층은 코드 간의 번역을 담당해 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로부터 덜어준다.
- MIM 인코딩이나 암호화 등의 동작이 표현 계층에서 이루어진다.
- 해당 데이터가 text인지, 그림인지, gif인지, jpg인지 등의 구분이 표현 계층의 몫이다.
- 예시: 유니코드(UTF-8)로 인코딩 되어 있는 문서를 아스키로 인코딩된 문서로 변화하려 할 때 표현 계층에서 변환한다.

**사용자의 명령어를 완성 및 결과 표현.  
포장/압축/암호화**

<br>

**5계층 - 세션 계층(Session Layer)**
- 데이터가 통신하기 위한 논리적 연결이다. (통신을 하기 위한 대문이라 생각하면 된다.)
- 세션 계층은 4계층과 무관하게 응용 프로그램 관점에서 봐야 한다. (4계층에서 연결을 맺고 종료할 수 있기 때문에 어느 계층에서 통신이 끊어졌나 판단하기엔 한계가 있음)
- 세션 설정, 유지, 종료, 전송 중단 시 복구 등의 기능이 있다.
- 세션 계층은 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공한다.
- 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)의 통신과 체크포인팅과 유휴, 종료, 다시 시작 과정 등을 수행한다.
- TCP/IP 세션을 만들고 없애는 책임을 진다.
- 통신하는 사용자들을 동기화하고 오류 복구 명령들을 일괄적으로 다룬다.

**통신하기 위한 세션을 확립/유지/중단 (운영체제가 해줌)**

<br>

**4계층 - 전송 계층(Transport Layer)**
- 통신을 활성화하기 위한 계층이다.
- 보통 TCP프로토콜을 이용하고, 포트를 열어서 응용 프로그램들이 전송할 수 있게 한다.
- 만약 데이터가 왔다면 4계층에서 해당 데이터를 하나로 합쳐 5계층에 넘겨 준다.
- TCP/UDP 프로토콜을 사용한다.
- 양 끝단(End to End)의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있도록 해 주어, 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다.
- 시퀀스 넘버 기반의 오류 제어 방식을 사용한다.
- 전송 계층은 특정 연결의 유효성을 제어하고, 일부 프로토콜은 상태 개념이 있고(stateful), 연결 기반(connection oriented)이다. 즉, **전송 계층이 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송**한다는 것이다. (TCP)
- 종단 간(end-to-end) 통신을 다루는 최하위 계층으로 종단 간 신뢰성 있고 효율적인 데이터를 전송하며, 기능은 오류 검출 및 복구와 흐름 제어, 중복 검사 등을 수행한다.

**패킷 생성(Assembly/Sequencing/Deassembly/Error Detection/Request repeat/Flow control) 및 전송**


<br>

**3계층 - 네트워크 계층(Network Layer)**  
- **데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅)**
- 네트워크 계층은 경로를 선택하고 주소를 정해 경로에 따라 패킷을 전달해주는 역할을 한다.
- 대표적 장비: 라우터
- 최근엔 2계층의 장비 중 스위치라는 장비에 라우팅 기능을 장착한 Layer3 스위치도 있다.(여기서 IP주소 사용)
- 네트워크 계층은 여러 개의 노드를 거칠 때마다 경로를 찾아주는 역할을 한다.
- 다양한 길이의 데이터를 네트워크들을 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스 품질(QoS)을 제공하기 위한 기능적, 절차적 수단을 제공한다. 
- 네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(Internetworking) 등을 수행한다. 
- 논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)이다.

**주소 부여(IP), 경로 설정(Route)**

<br>

**2계층 - 데이터링크 계층(DataLink Layer)**  
- 물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 **안전한 정보의 전달**을 수행할 수 있도록 도와주는 역할을 한다.
- 통신에서의 오류도 찾아주고 재전송도 하는 기능을 가진다
- 프레임에 주소를 부여(MAC - 물리적주소)
- **맥 주소**를 가지고 통신한다.
- 전송 단위: 프레임
- 대표적 장비: 브릿지, 스위치(브릿지나 스위치를 통해 MAC 주소를 가지고 물리 계층에서 받은 정보를 전달)
- 포인트 투 포인트(Point to Point)간 신뢰성 있는 전송을 보장하기 위한 계층으로, CRC 기반의 오류 제어와 흐름 제어가 필요하다.
- 네트워크 위의 개체들 간 데이터를 전달하고, 물리 계층에서 발생할 수 있는 오류를 찾아내고, 수정하는데 필요한 기능적, 절차적 수단을 제공한다
- 주소 체계는 계층이 없는 단일 구조이다.
- 데이터 링크 계층의 예: 이더넷, HDLC, ADCCP, LLC, ALOHA

포인트 투 포인트 프로토콜: HDLC, ADCCP  
패킷 스위칭 네트워크  
근거리 네트워크용 프로토콜: LLC, ALOHA

**에러검출/재전송/흐름제어**

<br>

**1계층 - 물리 계층(Physical Layer)**  
- 전기적, 기계적, 기능적인 특성을 이용해 통신 케이블로 데이터를 전송한다.
- 통신 단위: 비트(1과 0, On/Off)
- 데이터를 전달만 할 뿐 전송하려는(혹은 받으려는) **데이터가 무엇인지, 어떤 에러가 있는지 등은 신경 쓰지 않는다.**
- 데이터를 전기적인 신호로 변환해서 주고 받는 기능만 한다.
- 대표적 장비: 통신 케이블, 리피터, 허브 등

**케이블, 리피터, 허브를 통해 데이터 전송**

<br>

### TCP/IP 4계층와 비교


![](https://velog.velcdn.com/images/jimeaning/post/ec5ae613-4807-4391-9911-c984fb728bb2/image.png)

- TCP/IP 프로토콜과 OSI 모델은 정확하게 일치하지 않는다.
- 세션과 표현 계층이 TCP/IP 프로토콜 그룹에 없다.
- 두 모델은 모두 계층형이라는 공통점을 가지고 있다.
- TCP/IP는 인터넷 개발 이후 계속 표준화되어 신뢰성이 우수한 반면, OSI 7 계층은 실제적으로 구현되는 예가 거의 없어 신뢰성이 저하되었다.
- OSI 7 계층은 장비 개발과 통신 자체를 어떻게 표준으로 잡을지 사용되는 반면, 실질적인 통신 자체는 TCP/IP 프로토콜을 사용한다.

<br>

#### 참고
[OSI 7계층이란-티스토리](https://shlee0882.tistory.com/110)  
[OSI 7계층-해시넷위키](http://wiki.hash.kr/index.php/OSI_7_%EA%B3%84%EC%B8%B5)  
[네트워크 기본 계층 구조-티스토리](https://ryusae.tistory.com/4)